name: main

on: 
  push:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: download
        id: dload
        run: |
          NAME="Tiny10.iso"
          TAG=7lite
          
          wget -q https://archive.org/download/tiny10_202302/Tiny10.iso
          
          if [[ -v GITHUB_WORKFLOW ]]; then
            echo "RELEASE_NAME=${NAME}" >> $GITHUB_OUTPUT
            echo "RELEASE_TAG=${TAG}" >> $GITHUB_OUTPUT
          fi

      - name: Publish release
        uses: ncipollo/release-action@v1
        with:
          allowUpdates: true
          tag: ${{ steps.dload.outputs.RELEASE_TAG }}
          name: ${{ steps.dload.outputs.RELEASE_NAME }}
          artifacts: "${{ steps.dload.outputs.RELEASE_NAME }}"
          body: |
            This is ${{ steps.build.outputs.RELEASE_NAME }}.
          token: ${{ secrets.GITHUB_TOKEN }}
         
